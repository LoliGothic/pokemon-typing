(this.webpackJsonpmediapipe_facemesh=this.webpackJsonpmediapipe_facemesh||[]).push([[0],{109:function(e,t,n){},155:function(e,t,n){"use strict";n.r(t);n(109);var c=n(0),i=n.n(c),a=n(36),r=n.n(a),s=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,202)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),i(e),a(e),r(e)}))},o=n(2),l=n(196),j=n(197),d=n(194),u=n(189),h=n(93),b=n.n(h),f=n(90),x=n(1),O=function(){return Object(x.jsxs)(l.a,{position:"static",color:"primary",children:[Object(x.jsxs)(f.a,{children:[Object(x.jsx)("title",{children:"Eye-Typing"}),Object(x.jsx)("meta",{property:"ogel:image",content:"/emojis/happy.png"},"ogImage"),Object(x.jsx)("link",{rel:"icon",href:"/emojis/happy.png"})]}),Object(x.jsx)(j.a,{style:{display:"flex",justifyContent:"space-between"},children:Object(x.jsxs)(u.a,{direction:"row",spacing:1,children:[Object(x.jsx)(b.a,{}),Object(x.jsx)(d.a,{children:"Eye-Typing"})]})})]})},m=n(195),g=n(191);function p(){return Object(x.jsx)(u.a,{spacing:2,direction:"row",justifyContent:"center",children:Object(x.jsx)(g.a,{component:"a",size:"large",variant:"contained",style:{width:200,height:64,fontSize:20},children:"Play"})})}var E=n(193),v=n(198),y=n(200),F=n(199),S=n.p+"static/media/happy.a95dfaf0.png";function w(){return Object(x.jsxs)(v.a,{component:"a",sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(x.jsx)(F.a,{component:"img",width:"auto",height:"600px",style:{objectFit:"contain"},image:S,alt:"user icon"}),Object(x.jsx)(y.a,{children:Object(x.jsx)(d.a,{gutterBottom:!0,variant:"h5",component:"div",children:"Username"})})]})}function C(){return Object(x.jsx)(m.a,{m:"40px auto",sx:{width:"90%",minHeight:300,p:2,border:"1px solid blue"},children:Object(x.jsxs)(E.a,{container:!0,justifyContent:"center",alignItems:"center",columns:2,children:[Object(x.jsx)(E.a,{item:!0,xs:1,children:Object(x.jsx)(w,{})}),Object(x.jsx)(E.a,{item:!0,xs:1,justifyContent:"center",alignItems:"center",children:Object(x.jsx)("nav",{children:Object(x.jsx)("ul",{children:Object(x.jsx)("li",{children:Object(x.jsx)("a",{href:"#play",children:Object(x.jsx)(p,{})})})})})})]})})}var _=function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(O,{}),Object(x.jsx)(c.Fragment,{children:Object(x.jsx)(C,{})})]})},z=n(190),M=n(95),T=n.n(M),I=Object(z.a)((function(){return{defaultFont:{textAlign:"center",fontSize:"15px"},inputBox:{padding:"30px",marginBottom:"30px",textAlign:"center",top:"0"},greenFont:{color:"#689f38",display:"inline",fontFamily:"Times New Roman",fontSize:"50px"},redFont:{backgroundColor:"#e0e0e0",color:"red",display:"inline",fontFamily:"Times New Roman",fontSize:"50px"},greyFont:{color:"grey",display:"inline",fontFamily:"Times New Roman",fontSize:"50px"},blackFont:{backgroundColor:"#e0e0e0",display:"inline",fontFamily:"Times New Roman",fontSize:"50px"},stats:{display:"inline",fontSize:"20px",margin:"0 30px",textAlign:"center"},rights:{fontSize:"20px",padding:"20px"}}}));var A,H,L=function(){var e=I(),t=Object(c.useState)(""),n=Object(o.a)(t,2),i=n[0],a=n[1],r=Object(c.useState)(0),s=Object(o.a)(r,2),l=s[0],j=s[1],u=Object(c.useState)(!1),h=Object(o.a)(u,2),b=h[0],f=h[1],O=Object(c.useState)(0),g=Object(o.a)(O,2),p=g[0],E=g[1],v=Object(c.useState)(!1),y=Object(o.a)(v,2),F=y[0],S=y[1],w=Object(c.useState)(!1),C=Object(o.a)(w,2),_=C[0],z=C[1],M=Object(c.useState)(0),A=Object(o.a)(M,2),H=A[0],L=A[1],k=Object(c.useState)(0),R=Object(o.a)(k,2),N=R[0],Y=R[1],P=Object(c.useState)([]),B=Object(o.a)(P,2),G=B[0],W=B[1],D=Object(c.useState)(""),J=Object(o.a)(D,2),K=(J[0],J[1]);return Object(c.useEffect)((function(){T.a.get("https://pokeapi.co/api/v2/pokemon?limit=151").then((function(e){console.log(e.data.results);var t=Math.floor(151*Math.random());W(e.data.results),a(e.data.results[t].name)})).catch((function(e){return K(e.message)}))}),[]),Object(c.useEffect)((function(){if(G.length>0)if(H<10){var e=Math.floor(151*Math.random()),t=G[e].name;a(t),console.log(t)}else a(""),Y((new Date).getTime()-N),S(!0)}),[H]),Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:e.defaultFont,children:"\u4e0b\u306e\u82f1\u5358\u8a9e\u306e\u3069\u3053\u304b\u3092\u30af\u30ea\u30c3\u30af\u3057\u305f\u3042\u3068\u306b\u30b9\u30bf\u30fc\u30c8\u3067\u304d\u307e\u3059"}),Object(x.jsxs)(m.a,{onKeyPress:function(e){return function(e){F||(_||(z(!0),Y((new Date).getTime())),e.key===i[l]?(f(!1),j(l+1),l+1>=i.length&&(j(0),L(H+1),console.log(H))):(f(!0),E(p+1)))}(e)},tabIndex:0,className:e.inputBox,children:[Object(x.jsx)(d.a,{className:e.greenFont,children:i.slice(0,l)}),b?Object(x.jsx)(d.a,{className:e.redFont,children:i[l]}):Object(x.jsx)(d.a,{className:e.blackFont,children:i[l]}),Object(x.jsx)(d.a,{className:e.greyFont,children:i.slice(l+1,i.length)})]}),Object(x.jsx)(m.a,{marginBottom:"50px",className:e.stats,children:Object(x.jsxs)(d.a,{children:["missType: ",p]})})]})},k=n(30),R=n(42),N=n.n(R),Y=n(58),P=n(75),B=n(99),G=n.n(B),W=n(76),D=n(100),J=n(16),K=n(20),U=n(31),V=function(e,t){var n=e.canvas.width*t.x,c=e.canvas.height*t.y;e.fillStyle="#22a7f2",e.beginPath(),e.arc(n,c,5,0,2*Math.PI,!0),e.fill()};function q(){return Object(x.jsx)(u.a,{spacing:2,direction:"row",justifyContent:"center",children:Object(x.jsx)(g.a,{component:"a",size:"large",variant:"contained",style:{width:200,height:64,fontSize:20},children:"Result"})})}var Q=function(){var e=Object(c.useRef)(null),t=Object(c.useRef)(null),n=Object(c.useRef)(),i=Object(P.b)({bgImage:!0,landmark:{min:0,max:477,step:1,value:0},result:Object(P.a)((function(){a()}))}),a=function(){if(n.current){var e=n.current;console.log("results",e),console.log(e.multiFaceLandmarks[0]);for(var t=e.multiFaceLandmarks[0],c=[],i=1e4,a=-1e4,r=1e4,s=-1e4,o=1e4,l=-1e4,j=0;j<t.length;j++)i>t[j].x&&(i=t[j].x),a<t[j].x&&(a=t[j].x),r>t[j].y&&(r=t[j].y),s<t[j].y&&(s=t[j].y),o>t[j].z&&(o=t[j].z),l<t[j].z&&(l=t[j].z);for(var d=0;d<t.length;d++)c[d]={x:(t[d].x-i)/(a-i),y:(t[d].y-r)/(s-r),z:(t[d].z-o)/(l-o)};for(var u=0,h=0;h<J.FACEMESH_LEFT_EYE.length;h++)c[h].x,c[h].y,u+=c[h].z;J.FACEMESH_LEFT_EYE.length,J.FACEMESH_LEFT_EYE.length,u/=J.FACEMESH_LEFT_EYE.length;for(var b=0,f=0;f<J.FACEMESH_RIGHT_EYE.length;f++)c[f].x,c[f].y,b+=c[f].z;J.FACEMESH_RIGHT_EYE.length,J.FACEMESH_RIGHT_EYE.length,b/=J.FACEMESH_RIGHT_EYE.length;for(var x=0,O=0;O<J.FACEMESH_LIPS.length;O++)c[O].x,c[O].y,x+=c[O].z;J.FACEMESH_LIPS.length,J.FACEMESH_LIPS.length,x/=J.FACEMESH_LIPS.length,console.log("lips_z_avg - (left_eye_z_avg + right_eye_z_avg) / 2",x-(u+b)/2),x-(u+b)/2>.08?console.log("front"):console.log("down"),console.log("FACEMESH_LEFT_EYE",J.FACEMESH_LEFT_EYE)}},r=function(e){n.current=e,function(e,t,n,c){var i=e.canvas.width,a=e.canvas.height;if(e.save(),e.clearRect(0,0,i,a),n&&e.drawImage(t.image,0,0,i,a),t.multiFaceLandmarks){var r,s={color:"#C0C0C070",lineWidth:1},o={color:"#FF3030",lineWidth:1},l={color:"#30FF30",lineWidth:1},j={color:"#E0E0E0",lineWidth:1},d=Object(K.a)(t.multiFaceLandmarks);try{for(d.s();!(r=d.n()).done;){var u=r.value;Object(U.drawConnectors)(e,u,J.FACEMESH_TESSELATION,s),Object(U.drawConnectors)(e,u,J.FACEMESH_RIGHT_EYE,o),Object(U.drawConnectors)(e,u,J.FACEMESH_RIGHT_IRIS,o),Object(U.drawConnectors)(e,u,J.FACEMESH_LEFT_EYE,l),Object(U.drawConnectors)(e,u,J.FACEMESH_LEFT_IRIS,l),Object(U.drawConnectors)(e,u,J.FACEMESH_FACE_OVAL,j),Object(U.drawConnectors)(e,u,J.FACEMESH_LIPS,j),V(e,u[c])}}catch(h){d.e(h)}finally{d.f()}}e.restore()}(t.current.getContext("2d"),e,i.bgImage,i.landmark),n.current||a()};return Object(c.useEffect)((function(){var t=new J.FaceMesh({locateFile:function(e){return"https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/".concat(e)}});if(t.setOptions({maxNumFaces:1,refineLandmarks:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}),t.onResults(r),e.current){var n=new D.Camera(e.current.video,{onFrame:function(){var n=Object(Y.a)(N.a.mark((function n(){return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.current||!e.current.video){n.next=3;break}return n.next=3,t.send({image:e.current.video});case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),width:1280,height:720});n.start()}return function(){t.close()}}),[]),Object(x.jsxs)("div",{className:X.container,children:[Object(x.jsx)(L,{}),Object(x.jsx)(G.a,{ref:e,style:{visibility:"hidden",display:"hidden"},audio:!1,width:1280,height:720,mirrored:!0,screenshotFormat:"image/jpeg",videoConstraints:{width:1280,height:720,facingMode:"user"}}),Object(x.jsx)("canvas",{ref:t,className:X.canvas,width:1280,height:720}),Object(x.jsx)(q,{})]})},X={container:Object(W.a)(A||(A=Object(k.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n  "]))),canvas:Object(W.a)(H||(H=Object(k.a)(["\n    position: absolute;\n    width: 1280px;\n    height: 720px;\n    background-color: #1e1e1e;\n    border: 1px solid #fff;\n    margin-top: 32px;\n  "])))},Z=function(e){var t=e.children;return Object(x.jsx)(m.a,{sx:{width:"100%"},children:Object(x.jsx)(d.a,{variant:"h3",component:"div",gutterBottom:!0,children:t})})},$={box:{width:"45%",margin:"50px auto 50px"}},ee=function(e){var t=e.result;return console.log("title:",t.number),console.log("result:",t),Object(x.jsxs)(m.a,{style:$.box,textAlign:"center",alignItems:"center",sx:{p:6,borderRadius:"30px",border:"2px solid #2798EC"},children:[Object(x.jsx)(Z,{children:"\u7d50\u679c"}),Object(x.jsx)(d.a,{fontSize:"h4.fontSize",m:4,children:"\u30b9\u30b3\u30a2"}),Object(x.jsxs)(d.a,{fontSize:"h3.fontSize",fontWeight:"bold",children:[t[0].number,"\u70b9"]}),Object(x.jsx)(d.a,{fontSize:"h5.fontSize",m:4,children:"\u753b\u9762\u304b\u3089\u76ee\u3092\u96e2\u3057\u305f\u6570"}),Object(x.jsxs)(d.a,{fontSize:"h4.fontSize",children:[t[1].number,"\u56de"]})]})},te=n(101),ne=n.n(te),ce=n(102),ie=n.n(ce),ae=function(){return Object(x.jsxs)(u.a,{direction:"row",spacing:8,justifyContent:"center",alignItems:"center",children:[Object(x.jsx)("a",{href:"/",children:Object(x.jsx)(g.a,{component:"a",variant:"outlined",children:Object(x.jsxs)(u.a,{direction:"row",spacing:1,children:[Object(x.jsx)(ne.a,{}),Object(x.jsx)(d.a,{children:"\u30db\u30fc\u30e0\u306b\u623b\u308b"})]})})}),Object(x.jsx)("a",{href:"#play",children:Object(x.jsx)(g.a,{component:"a",variant:"outlined",children:Object(x.jsxs)(u.a,{direction:"row",spacing:1,children:[Object(x.jsx)(ie.a,{}),Object(x.jsx)(d.a,{children:"\u3082\u3046\u4e00\u56de"})]})})})]})},re=n(103),se=[{id:"score",number:80},{id:"count",number:10}],oe=function(){var e=c.useRef(null),t=Object(c.useRef)(5),n=re.a.create(e.current,{resize:!0,useWorker:!0});return c.useEffect((function(){if(e.current){window.setTimeout((function e(){n({particleCount:100,spread:100,ticks:1e3,origin:{x:Math.random(),y:0}}),t.current--,0!==t.current&&setTimeout(e,1e3)}),1e3)}}),[e]),Object(x.jsxs)(c.Fragment,{children:[Object(x.jsx)(O,{}),Object(x.jsx)(ee,{result:se}),Object(x.jsx)(ae,{}),Object(x.jsx)("canvas",{ref:e})]})},le=function(){switch(function(e){var t=Object(c.useState)(e),n=Object(o.a)(t,2),i=n[0],a=n[1];return Object(c.useEffect)((function(){var e=function(){a(window.location.hash)};return window.addEventListener("hashchange",e),function(){return window.removeEventListener("hashChange",e)}}),[]),i}(window.location.hash)){case"":case"#":return Object(x.jsx)(_,{});case"#result":return Object(x.jsx)(oe,{});case"#play":return Object(x.jsx)(Q,{});case"#game":return Object(x.jsx)(L,{});default:return Object(x.jsx)("h1",{children:"Not found!"})}};r.a.render(Object(x.jsx)(i.a.StrictMode,{children:Object(x.jsx)(le,{})}),document.getElementById("root")),s()}},[[155,1,2]]]);
//# sourceMappingURL=main.0db88031.chunk.js.map